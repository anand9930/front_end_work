<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:600|Poppins:600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Lato&display=swap"
      rel="stylesheet"
    />
    <style>
      body,
      html {
        padding: 0px;
        margin: 0px;
      }
      .wrapper {
        width: 100%;
        height: 100vh;
      }
      .grid-wrapper {
        display: flex;
        width: 100%;
        background-color: red;
        height: 100vh;

        /* display: grid;
        grid-template-columns: 1fr 1.5fr; */
      }
      .grid-wrapper .left {
        width: 40%;
        height: 100vh;
        /* display: flex;
        justify-content: flex-start;
        flex-direction: column;
        align-items: center; */

        background-color: blue;
      }
      .left-wrapper {
        position: fixed;
        /* top: 0px;
        left: 0px; */
        height: 100vh;
        width: 40%;
        font-size: 28px;
        font-family: "Open Sans", sans-serif;
        background: url("https://mixkit.imgix.net/art/213/213-original.png-1000h.png?auto=format&q=80&fm=jpg&h=700&q=80&dpr=1");
        background-repeat: no-repeat;
        background-position: center;
        background-size: cover;
        padding: 0px 30px;
        box-sizing: border-box;
        display: flex;
        justify-content: flex-start;
        flex-direction: column;
        align-items: center;
      }
      .grid-wrapper .left .left-wrapper img {
        margin-top: 50px;
      }
      .grid-wrapper .left .left-wrapper div {
        max-width: 300px;
        margin-top: 330px;
        font-family: "Poppins", sans-serif;
        color: rgb(255, 255, 255);
      }
      .grid-wrapper .left .left-wrapper div span {
        background-color: rgb(103, 124, 247);
        -webkit-box-decoration-break: clone;
        box-decoration-break: clone;
        padding: 3px 10px;
      }
      .grid-wrapper .right {
        width: 60%;
        /* display: flex;
        flex-direction: column; */
        flex: none;
        flex-flow: column nowrap;
        background-color: rgb(245, 245, 245);
        overflow: auto;
        /* scroll-snap-type: y mandatory; */
      }
      .grid-wrapper .right .right-wrapper {
        scroll-snap-align: center;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: rgb(245, 245, 245);
      }
      .grid-wrapper .right .right-wrapper .form-wrapper {
        width: 70%;
        height: 300px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: space-evenly;
      }
      .form-wrapper input {
        outline: none;
        border: none;
        width: 100%;
        padding: 13px 0px;
        box-sizing: border-box;
        font-size: 23px;
        font-family: "Open Sans", sans-serif;
        background-color: transparent;
      }
      .form-wrapper input[type="email"] {
        border: 1.7px solid rgb(129, 129, 129);
        border-radius: 3px;
        padding: 14px 9px;
        font-size: 20px;
      }

      .form-wrapper input[type="email"]:focus {
        border: 1.7px solid rgb(56, 56, 56);
      }
      .form-wrapper textarea {
        width: 100%;
        height: 210px;
        resize: none;
        font-size: 23px;
        font-family: "Open Sans", sans-serif;
        padding: 10px 12px;
        box-sizing: border-box;
        outline: none;
        border: 1.5px solid rgb(29, 29, 29);
      }
      .form-wrapper button {
        margin: 25px 0px;
        /*  float: right;*/
        outline: none;
        border: none;
        border-radius: 5px;
        /*padding: 10px 23px;*/
        padding: 16px 0px;
        width: 100%;
        background-color: rgb(24, 24, 24);
        font-size: 18px;
        color: rgb(251, 251, 251);
        font-family: "Lato", sans-serif;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div class="grid-wrapper">
        <div class="left">
          <div class="left-wrapper">
            <img
              src="https://www.thinkpolls.com/static/poll_detail/images/thinkpolls-homepage.svg"
              style="width:58px"
            />
            <div>
              <span>ways to travel hello?</span>
            </div>
          </div>
        </div>
        <div class="right">
          <div class="right-wrapper" id="one">
            <div class="form-wrapper">
              <form action="" method="post">
                <input type="text" value="Name" />
                <input type="email" name="" id="" />
                <button type="button" onclick="smoothScroll('#two',330)">
                  next
                </button>
              </form>
            </div>
          </div>

          <div class="right-wrapper" id="two">
            <div class="form-wrapper">
              <form action="" method="post">
                <input type="text" value="E-mail" />
                <input type="email" name="" id="" />
                <button type="button" onclick="smoothScroll('#three',330)">
                  next
                </button>
              </form>
            </div>
          </div>

          <div class="right-wrapper" id="three">
            <div class="form-wrapper">
              <form action="" method="post">
                <input type="text" value="E-mail" />
                <input type="email" name="" id="" />
                <button type="button" onclick="smoothScroll('#two',330)">
                  prev
                </button>
              </form>
            </div>
          </div>
          <!---->

          <div class="right-wrapper" id="three">
            <div class="form-wrapper">
              Lorem Ipsum is simply dummy text of the printing and typesetting
              industry. Lorem Ipsum has been the industry's standard dummy text
              ever since the 1500s, when an unknown printer took a galley of
              type and scrambled it to make a type s
            </div>
          </div>
          <!---->
        </div>
      </div>
    </div>
  </body>
  <script>
    scroller = document.getElementsByClassName("right")[0];
    section_length =
      document.getElementsByClassName("right-wrapper").length - 1;
    function smoothScroll(target, offset, duration) {
      //target = document.querySelector(target);
      targetPosition = target.getBoundingClientRect().top;
      console.log(targetPosition);
      //   startPosition = window.pageYOffset;
      // startPosition = scroller.pageYOffset;
      //  startPosition = scroller.offsetTop;
      startPosition = offset;
      console.log(startPosition);
      distance = targetPosition; //- startPosition;
      startTime = null;
      function animation(currentTime) {
        // console.log(currentTime);
        if (startTime === null) {
          startTime = currentTime;
        }

        timeElapsed = currentTime - startTime;
        run = easeInOutCubic(timeElapsed, startPosition, distance, duration);
        //    console.log(run);
        // window.scrollTo(0, run);
        scroller.scrollTo(0, run);
        // window.scrollTo({ top: distance, left: 0, behavior: "smooth" });

        if (timeElapsed < duration) {
          requestAnimationFrame(animation);
        } else {
          scroller.addEventListener("wheel", myFunction);
        }
        // startTime = null;
      }
      //
      function easeInOutCubic(t, b, c, d) {
        // console.log(t, b, c, d);
        t /= d / 2;
        if (t < 1) return (c / 2) * t * t * t + b;
        t -= 2;
        return (c / 2) * (t * t * t + 2) + b;
      }

      requestAnimationFrame(animation);
    }

    box_object = document.getElementsByClassName("right-wrapper")[0];

    function myFunction() {
      scroller.removeEventListener("wheel", myFunction);
      target = box_object;
      console.log(target);
      i = Array.from(target.parentNode.children).indexOf(target);
      console.log(i, section_length);
      if (event.deltaY < 0 && i != 0) {
        console.log("scrolling up");
        box_object = box_object.previousElementSibling;
        offset = target.offsetTop;
        smoothScroll(box_object, offset, 330);
        // setTimeout(function() {
        //   scroller.addEventListener("wheel", myFunction);
        // }, 270);
        //  setTimeout(smoothScroll(box_object, offset, 260), 4000);
      } else if (event.deltaY > 0 && i != section_length) {
        console.log("scrolling down");
        box_object = box_object.nextElementSibling;
        offset = target.offsetTop;
        smoothScroll(box_object, offset, 300);
        // setTimeout(function() {
        //   scroller.addEventListener("wheel", myFunction);
        // }, 270);
      } else {
        scroller.addEventListener("wheel", myFunction);
      }
    }

    scroller.addEventListener("wheel", myFunction);
    //higer frequency causing errors in section positions
  </script>
</html>
